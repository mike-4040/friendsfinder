<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script src="https://kit.fontawesome.com/f4e397b66e.js" crossorigin="anonymous"></script>
    <title>Friends Finder</title>
  </head>

  <body>
    <div class="container">
      <h1>Please introduce yourself</h1>
      <form>
        <div class="form-group">
          <label for="name">Name</label>
          <input id="name" type="text" class="form-control" aria-describedby="nameHelp" />
          <small id="nameHelp" class="form-text text-muted">Please enter your real name.</small>
        </div>
        <div class="form-group">
          <label for="photoUrl">Link to your photo</label>
          <input id="photoUrl" type="url" class="form-control-url" />
        </div>
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="question01">Playing a game is fun only when you win.</label>
              <input type="range" class="form-control-range" min="1" max="5" id="question01" />
              <div class="d-flex">
                <small class="form-text text-muted">Disagree</small>
                <small class="form-text text-muted ml-auto">Agree</small>
              </div>
            </div>
            <div class="form-group">
              <label for="question02">Luck has nothing to do with success.</label>
              <input type="range" class="form-control-range" min="1" max="5" id="question02" />
              <div class="d-flex">
                <small class="form-text text-muted">Disagree</small>
                <small class="form-text text-muted ml-auto">Agree</small>
              </div>
            </div>
            <div class="form-group">
              <label for="question03">Summer is the best season of the year.</label>
              <input type="range" class="form-control-range" min="1" max="5" id="question03" />
              <div class="d-flex">
                <small class="form-text text-muted">Disagree</small>
                <small class="form-text text-muted ml-auto">Agree</small>
              </div>
            </div>
            <div class="form-group">
              <label for="question04"
                >In the future all companies will be internet companies.</label
              >
              <input type="range" class="form-control-range" min="1" max="5" id="question04" />
              <div class="d-flex">
                <small class="form-text text-muted">Disagree</small>
                <small class="form-text text-muted ml-auto">Agree</small>
              </div>
            </div>
            <div class="form-group">
              <label for="question05">Pizza is the best food in the world.</label>
              <input type="range" class="form-control-range" min="1" max="5" id="question05" />
              <div class="d-flex">
                <small class="form-text text-muted">Disagree</small>
                <small class="form-text text-muted ml-auto">Agree</small>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="question06">Pupils should be allowed to eat ice-cream in school.</label>
              <input type="range" class="form-control-range" min="1" max="5" id="question06" />
              <div class="d-flex">
                <small class="form-text text-muted">Disagree</small>
                <small class="form-text text-muted ml-auto">Agree</small>
              </div>
            </div>
            <div class="form-group">
              <label for="question07">The night is better than the day.</label>
              <input type="range" class="form-control-range" min="1" max="5" id="question07" />
              <div class="d-flex">
                <small class="form-text text-muted">Disagree</small>
                <small class="form-text text-muted ml-auto">Agree</small>
              </div>
            </div>
            <div class="form-group">
              <label for="question08">Internet is better than TV.</label>
              <input type="range" class="form-control-range" min="1" max="5" id="question08" />
              <div class="d-flex">
                <small class="form-text text-muted">Disagree</small>
                <small class="form-text text-muted ml-auto">Agree</small>
              </div>
            </div>
            <div class="form-group">
              <label for="question09">It's ok to lie.</label>
              <input type="range" class="form-control-range" min="1" max="5" id="question09" />
              <div class="d-flex">
                <small class="form-text text-muted">Disagree</small>
                <small class="form-text text-muted ml-auto">Agree</small>
              </div>
            </div>
            <div class="form-group">
              <label for="question10">Snow is better than sand.</label>
              <input type="range" class="form-control-range" min="1" max="5" id="question10" />
              <div class="d-flex">
                <small class="form-text text-muted">Disagree</small>
                <small class="form-text text-muted ml-auto">Agree</small>
              </div>
            </div>
          </div>
        </div>
        <button id="submit" type="submit" class="btn btn-primary">Submit</button>
      </form>
      <div id="results-modal" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
              <h2 class="modal-title"><strong>Best Match</strong></h2>
            </div>
            <div class="modal-body">
              <h2>Name: <span id="match-name"></span></h2>
              <img id="match-img" alt="" class="w-75 img-thumbnail" />
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <p>
          <a href="/api/friends" target="_blank"
            ><i class="fas fa-user-friends"></i> API Friends List</a
          >
          |
          <a href="https://github.com/mike-4040/friendsfinder" target="_blank"
            ><i class="fab fa-github"></i> GitHub Repo</a
          >
        </p>
      </div>
    </footer>

    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script>
      $(document).ready(listenForm);

      function listenForm() {
        $('#submit').on('click', getFormData);
      }

      function getFormData(event) {
        event.preventDefault();

        if (!validateForm()) {
          return;
        }
        const userInfo = {
          name: $('#name').val(),
          photo: $('#photoUrl').val(),
          scores: [
            $('#question01').val(),
            $('#question02').val(),
            $('#question03').val(),
            $('#question04').val(),
            $('#question05').val(),
            $('#question06').val(),
            $('#question07').val(),
            $('#question08').val(),
            $('#question09').val(),
            $('#question10').val()
          ]
        };
        $.post('/api/friends', userInfo, function(data) {
          console.log(`Respond from the Server: ${data.name}, ${data.photo}`);
          $('#match-name').text(data.name);
          $('#match-img').attr('src', data.photo);
          $('#results-modal').modal('toggle');
        });
      }
      validateForm = () => $('#name').val() && $('#photoUrl').val();
    </script>
  </body>
</html>
